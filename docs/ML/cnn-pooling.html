<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Chao Ma">
<meta name="dcterms.date" content="2025-11-24">

<title>Chapter 9.3: Pooling – ∇ ickma.dev</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.svg" rel="icon" type="image/svg+xml">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-5b4ad623e5705c0698d39aec6f10cf02.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">∇ ickma.dev</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-deep-learning-book" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Deep Learning Book</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-deep-learning-book">    
        <li>
    <a class="dropdown-item" href="../ML/xor-deep-learning.html">
 <span class="dropdown-text">Chapter 6.1: XOR Problem</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/likelihood-loss-functions.html">
 <span class="dropdown-text">Chapter 6.2: Loss Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/activation-functions.html">
 <span class="dropdown-text">Chapter 6.3: Activation Functions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/architecture-design.html">
 <span class="dropdown-text">Chapter 6.4: Architecture Design</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/backpropagation.html">
 <span class="dropdown-text">Chapter 6.5: Back-Propagation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/hessian-prerequisites.html">
 <span class="dropdown-text">Chapter 7 Prerequisites: Hessian Matrix</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/l2-regularization.html">
 <span class="dropdown-text">Chapter 7.1.1: L2 Regularization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/l1-regularization.html">
 <span class="dropdown-text">Chapter 7.1.2: L1 Regularization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/constrained-optimization-regularization.html">
 <span class="dropdown-text">Chapter 7.2: Constrained Optimization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/regularization-underconstrained.html">
 <span class="dropdown-text">Chapter 7.3: Under-Constrained Problems</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/dataset-augmentation.html">
 <span class="dropdown-text">Chapter 7.4: Dataset Augmentation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/noise-robustness.html">
 <span class="dropdown-text">Chapter 7.5: Noise Robustness</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/semi-supervised-learning.html">
 <span class="dropdown-text">Chapter 7.6: Semi-Supervised Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/multi-task-learning.html">
 <span class="dropdown-text">Chapter 7.7: Multi-Task Learning</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/early-stopping.html">
 <span class="dropdown-text">Chapter 7.8: Early Stopping</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/parameter-tying-sharing.html">
 <span class="dropdown-text">Chapter 7.9: Parameter Tying &amp; Sharing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/representation-sparsity.html">
 <span class="dropdown-text">Chapter 7.10: Sparse Representations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/bagging-ensemble.html">
 <span class="dropdown-text">Chapter 7.11: Bagging &amp; Ensemble Methods</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/dropout.html">
 <span class="dropdown-text">Chapter 7.12: Dropout</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/adversarial-training.html">
 <span class="dropdown-text">Chapter 7.13: Adversarial Training</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/tangent-prop-manifold.html">
 <span class="dropdown-text">Chapter 7.14: Tangent Prop &amp; Manifolds</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/learning-vs-optimization.html">
 <span class="dropdown-text">Chapter 8.1: Learning vs Optimization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/optimization-challenges.html">
 <span class="dropdown-text">Chapter 8.2: Optimization Challenges</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/basic-optimization-algorithms.html">
 <span class="dropdown-text">Chapter 8.3: Basic Algorithms</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/parameter-initialization.html">
 <span class="dropdown-text">Chapter 8.4: Parameter Initialization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/adaptive-learning-rates.html">
 <span class="dropdown-text">Chapter 8.5: Adaptive Learning Rates</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/second-order-methods.html">
 <span class="dropdown-text">Chapter 8.6: Second-Order Methods</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/optimization-strategies.html">
 <span class="dropdown-text">Chapter 8.7: Optimization Strategies</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/convolution-computation.html">
 <span class="dropdown-text">Chapter 9.1: Convolution Computation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/cnn-motivation.html">
 <span class="dropdown-text">Chapter 9.2: CNN Motivation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/cnn-pooling.html">
 <span class="dropdown-text">Chapter 9.3: Pooling</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-math" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Math</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-math">    
        <li class="dropdown-header">Reflections &amp; Synthesis</li>
        <li>
    <a class="dropdown-item" href="../Math/reflections/mit1806-invertibility-connections.html">
 <span class="dropdown-text">Invertibility Connections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/reflections/taylor-euler-fourier.html">
 <span class="dropdown-text">Taylor, Euler, and Fourier</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">MIT 18.06SC Linear Algebra</li>
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture1-geometry.html">
 <span class="dropdown-text">Lecture 1: Geometry</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture2-elimination.html">
 <span class="dropdown-text">Lecture 2: Elimination</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture3-multiplication.html">
 <span class="dropdown-text">Lecture 3: Multiplication</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture4-lu-decomposition.html">
 <span class="dropdown-text">Lecture 4: LU Decomposition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture5-permutations.html">
 <span class="dropdown-text">Lecture 5.1: Permutations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture5-2-transpose.html">
 <span class="dropdown-text">Lecture 5.2: Transpose</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture5-3-spaces.html">
 <span class="dropdown-text">Lecture 5.3: Spaces</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture6-column-null-space.html">
 <span class="dropdown-text">Lecture 6: Column &amp; Null Space</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture7-solving-ax-0.html">
 <span class="dropdown-text">Lecture 7: Solving Ax=0</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture8-solving-ax-b.html">
 <span class="dropdown-text">Lecture 8: Solving Ax=b</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture9-independence-basis-dimension.html">
 <span class="dropdown-text">Lecture 9: Independence, Basis, Dimension</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture10-four-subspaces.html">
 <span class="dropdown-text">Lecture 10: Four Fundamental Subspaces</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture11-matrix-spaces.html">
 <span class="dropdown-text">Lecture 11: Matrix Spaces</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture12-graphs-networks.html">
 <span class="dropdown-text">Lecture 12: Graphs and Networks</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture13-quiz-review.html">
 <span class="dropdown-text">Lecture 13: Quiz 1 Review</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture14-orthogonality.html">
 <span class="dropdown-text">Lecture 14: Orthogonality</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture15-projections.html">
 <span class="dropdown-text">Lecture 15: Projections</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture16-least-squares.html">
 <span class="dropdown-text">Lecture 16: Least Squares</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture17-gram-schmidt.html">
 <span class="dropdown-text">Lecture 17: Gram-Schmidt</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture18-determinants.html">
 <span class="dropdown-text">Lecture 18: Determinants</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture19-determinant-formulas.html">
 <span class="dropdown-text">Lecture 19: Determinant Formulas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture20-cramers-rule.html">
 <span class="dropdown-text">Lecture 20: Inverse &amp; Volume</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture21-eigenvalues-eigenvectors.html">
 <span class="dropdown-text">Lecture 21: Eigenvalues &amp; Eigenvectors</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture22-diagonalization-powers.html">
 <span class="dropdown-text">Lecture 22: Diagonalization &amp; Powers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture23-differential-equations.html">
 <span class="dropdown-text">Lecture 23: Differential Equations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture24-markov-fourier.html">
 <span class="dropdown-text">Lecture 24: Markov &amp; Fourier</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture25-symmetric-positive-definite.html">
 <span class="dropdown-text">Lecture 25: Symmetric &amp; Positive Definite</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture26-complex-matrices-fft.html">
 <span class="dropdown-text">Lecture 26: Complex Matrices &amp; FFT</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture27-positive-definite-minima.html">
 <span class="dropdown-text">Lecture 27: Positive Definite &amp; Minima</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture28-similar-matrices-jordan.html">
 <span class="dropdown-text">Lecture 28: Similar Matrices &amp; Jordan Form</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture29-svd.html">
 <span class="dropdown-text">Lecture 29: Singular Value Decomposition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../Math/MIT18.06/mit1806-lecture30-linear-transformations.html">
 <span class="dropdown-text">Lecture 30: Linear Transformations</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">More</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-more">    
        <li>
    <a class="dropdown-item" href="../ML/kmeans.html">
 <span class="dropdown-text">K-Means Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/logistic_regression.html">
 <span class="dropdown-text">Logistic Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../ML/axis.html">
 <span class="dropdown-text">Axis Operations</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li>
    <a class="dropdown-item" href="../Algorithm/dp_regex.html">
 <span class="dropdown-text">DP Regex</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/ickma2311/ickma2311.github.io/discussions"> 
<span class="menu-text">Feedback</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#pooling-core-operation" id="toc-pooling-core-operation" class="nav-link" data-scroll-target="#pooling-core-operation">1. Pooling: Core Operation</a>
  <ul class="collapse">
  <li><a href="#why-pooling" id="toc-why-pooling" class="nav-link" data-scroll-target="#why-pooling">Why Pooling?</a></li>
  </ul></li>
  <li><a href="#local-translation-invariance" id="toc-local-translation-invariance" class="nav-link" data-scroll-target="#local-translation-invariance">2. Local Translation Invariance</a>
  <ul class="collapse">
  <li><a href="#definition" id="toc-definition" class="nav-link" data-scroll-target="#definition">Definition</a></li>
  <li><a href="#how-pooling-creates-invariance" id="toc-how-pooling-creates-invariance" class="nav-link" data-scroll-target="#how-pooling-creates-invariance">How Pooling Creates Invariance</a></li>
  <li><a href="#mathematical-interpretation" id="toc-mathematical-interpretation" class="nav-link" data-scroll-target="#mathematical-interpretation">Mathematical Interpretation</a></li>
  </ul></li>
  <li><a href="#max-pooling-operation" id="toc-max-pooling-operation" class="nav-link" data-scroll-target="#max-pooling-operation">3. Max Pooling Operation</a>
  <ul class="collapse">
  <li><a href="#definition-1" id="toc-definition-1" class="nav-link" data-scroll-target="#definition-1">Definition</a></li>
  <li><a href="#common-configurations" id="toc-common-configurations" class="nav-link" data-scroll-target="#common-configurations">Common Configurations</a></li>
  <li><a href="#properties-of-max-pooling" id="toc-properties-of-max-pooling" class="nav-link" data-scroll-target="#properties-of-max-pooling">Properties of Max Pooling</a></li>
  <li><a href="#downsampling-effect" id="toc-downsampling-effect" class="nav-link" data-scroll-target="#downsampling-effect">Downsampling Effect</a></li>
  </ul></li>
  <li><a href="#alternative-pooling-operations" id="toc-alternative-pooling-operations" class="nav-link" data-scroll-target="#alternative-pooling-operations">4. Alternative Pooling Operations</a>
  <ul class="collapse">
  <li><a href="#average-pooling" id="toc-average-pooling" class="nav-link" data-scroll-target="#average-pooling">Average Pooling</a></li>
  <li><a href="#l²-pooling" id="toc-l²-pooling" class="nav-link" data-scroll-target="#l²-pooling">L² Pooling</a></li>
  <li><a href="#weighted-average-pooling" id="toc-weighted-average-pooling" class="nav-link" data-scroll-target="#weighted-average-pooling">Weighted Average Pooling</a></li>
  </ul></li>
  <li><a href="#cnn-architectures-pooling-strategies" id="toc-cnn-architectures-pooling-strategies" class="nav-link" data-scroll-target="#cnn-architectures-pooling-strategies">5. CNN Architectures: Pooling Strategies</a>
  <ul class="collapse">
  <li><a href="#architecture-1-no-pooling-stride-based-downsampling" id="toc-architecture-1-no-pooling-stride-based-downsampling" class="nav-link" data-scroll-target="#architecture-1-no-pooling-stride-based-downsampling">Architecture 1: No Pooling (Stride-Based Downsampling)</a></li>
  <li><a href="#architecture-2-max-pooling-network" id="toc-architecture-2-max-pooling-network" class="nav-link" data-scroll-target="#architecture-2-max-pooling-network">Architecture 2: Max Pooling Network</a></li>
  <li><a href="#architecture-3-global-average-pooling-gap-network" id="toc-architecture-3-global-average-pooling-gap-network" class="nav-link" data-scroll-target="#architecture-3-global-average-pooling-gap-network">Architecture 3: Global Average Pooling (GAP) Network</a></li>
  </ul></li>
  <li><a href="#pooling-vs-strided-convolutions" id="toc-pooling-vs-strided-convolutions" class="nav-link" data-scroll-target="#pooling-vs-strided-convolutions">6. Pooling vs Strided Convolutions</a>
  <ul class="collapse">
  <li><a href="#comparison-table" id="toc-comparison-table" class="nav-link" data-scroll-target="#comparison-table">Comparison Table</a></li>
  <li><a href="#current-trends" id="toc-current-trends" class="nav-link" data-scroll-target="#current-trends">Current Trends</a></li>
  </ul></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Chapter 9.3: Pooling</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">Deep Learning</div>
    <div class="quarto-category">Convolutional Networks</div>
    <div class="quarto-category">Pooling</div>
    <div class="quarto-category">CNN Architecture</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Chao Ma </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 24, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<p>This section explains the pooling operation in convolutional neural networks:</p>
<ul>
<li><strong>Local translation invariance</strong>: Making networks insensitive to exact spatial locations</li>
<li><strong>Max pooling</strong>: Downsampling by selecting maximum activations in local neighborhoods</li>
<li><strong>Pooling benefits</strong>: Reduced computation, improved robustness, and approximate translation invariance</li>
<li><strong>CNN architectures</strong>: Comparing different approaches to spatial downsampling</li>
</ul>
<p>Pooling is a critical component that reduces spatial resolution while preserving important features, making CNNs more efficient and robust to small translations.</p>
<hr>
</section>
<section id="pooling-core-operation" class="level2">
<h2 class="anchored" data-anchor-id="pooling-core-operation">1. Pooling: Core Operation</h2>
<p><strong>Pooling reduces the spatial resolution of feature maps by summarizing local neighborhoods</strong> (e.g., via max or average). It makes the representation more robust to small translations, reduces sensitivity to exact pixel locations, and improves computational and statistical efficiency.</p>
<p><img src="CNN_components.png" class="img-fluid" alt="CNN components overview"> <em>Figure: Overview of CNN components - convolution detects features, pooling aggregates and downsamples, creating a hierarchy of increasingly abstract representations.</em></p>
<section id="why-pooling" class="level3">
<h3 class="anchored" data-anchor-id="why-pooling">Why Pooling?</h3>
<p>Pooling addresses several key challenges in CNNs:</p>
<ol type="1">
<li><strong>Computational efficiency</strong>: Fewer spatial locations means fewer parameters in subsequent layers</li>
<li><strong>Statistical efficiency</strong>: Aggregating over neighborhoods provides more robust features</li>
<li><strong>Translation invariance</strong>: Small shifts in input produce similar outputs after pooling</li>
<li><strong>Receptive field growth</strong>: Each pooling layer increases the effective receptive field</li>
</ol>
<p><strong>Key insight</strong>: While convolution provides translation <strong>equivariance</strong> (output shifts when input shifts), pooling provides approximate translation <strong>invariance</strong> (output remains similar despite input shifts).</p>
<hr>
</section>
</section>
<section id="local-translation-invariance" class="level2">
<h2 class="anchored" data-anchor-id="local-translation-invariance">2. Local Translation Invariance</h2>
<section id="definition" class="level3">
<h3 class="anchored" data-anchor-id="definition">Definition</h3>
<p><strong>Local translation invariance means that small shifts in the input produce nearly unchanged outputs.</strong> After convolution and pooling, the representation becomes insensitive to the exact spatial location of features, responding mainly to whether a feature is present rather than where it appears within a small neighborhood.</p>
</section>
<section id="how-pooling-creates-invariance" class="level3">
<h3 class="anchored" data-anchor-id="how-pooling-creates-invariance">How Pooling Creates Invariance</h3>
<p>Consider detecting a specific pattern (like an edge or a digit) in an image:</p>
<ul>
<li><strong>Without pooling</strong>: Each detector unit responds to the pattern at one precise location</li>
<li><strong>With pooling</strong>: Multiple detectors at nearby locations feed into a single pooling unit</li>
<li><strong>Result</strong>: The pooling unit fires strongly if the pattern appears <em>anywhere</em> in the pooling region</li>
</ul>
<p><img src="local_transition_invariant.png" class="img-fluid" alt="Translation invariance through pooling"> <em>Figure: Translation invariance through pooling - different detectors respond strongly to different shifted versions of the same pattern (middle row shows three shifted ‘5’ digits), but the pooling unit aggregates these responses into a single large output. Thus, even when the input ‘5’ appears at different positions, the pooled representation remains nearly unchanged.</em></p>
</section>
<section id="mathematical-interpretation" class="level3">
<h3 class="anchored" data-anchor-id="mathematical-interpretation">Mathematical Interpretation</h3>
<p>If <span class="math inline">\(f(x)\)</span> is the convolution output at position <span class="math inline">\(x\)</span>, and we apply max pooling over a region <span class="math inline">\(R\)</span>:</p>
<p><span class="math display">\[
\text{pool}(R) = \max_{x \in R} f(x)
\]</span></p>
<p><strong>Translation invariance property</strong>: If we shift the input slightly, some detector within the pooling region will still fire strongly:</p>
<p><span class="math display">\[
\text{pool}(R) \approx \text{pool}(R + \delta)
\]</span></p>
<p>for small shifts <span class="math inline">\(\delta\)</span>.</p>
<p><strong>Contrast with translation equivariance</strong>: - <strong>Convolution alone</strong>: <span class="math inline">\(f(g(x)) = g(f(x))\)</span> (equivariant - output shifts with input) - <strong>Convolution + pooling</strong>: <span class="math inline">\(\text{pool}(f(g(x))) \approx \text{pool}(f(x))\)</span> (invariant - output approximately unchanged)</p>
<hr>
</section>
</section>
<section id="max-pooling-operation" class="level2">
<h2 class="anchored" data-anchor-id="max-pooling-operation">3. Max Pooling Operation</h2>
<section id="definition-1" class="level3">
<h3 class="anchored" data-anchor-id="definition-1">Definition</h3>
<p><strong>Max pooling</strong> is the most common pooling operation, which selects the maximum activation within each local neighborhood.</p>
<p>For a pooling region of size <span class="math inline">\(k \times k\)</span> with stride <span class="math inline">\(s\)</span>, max pooling computes:</p>
<p><span class="math display">\[
y_{i,j} = \max_{p=0,\ldots,k-1} \max_{q=0,\ldots,k-1} x_{si+p, sj+q}
\]</span></p>
<p>where: - <span class="math inline">\(x\)</span> is the input feature map - <span class="math inline">\(y\)</span> is the output (pooled) feature map - <span class="math inline">\((i, j)\)</span> are the output coordinates - <span class="math inline">\((p, q)\)</span> index within the pooling window</p>
</section>
<section id="common-configurations" class="level3">
<h3 class="anchored" data-anchor-id="common-configurations">Common Configurations</h3>
<p><strong>Typical pooling settings</strong>:</p>
<ol type="1">
<li><strong>2×2 pooling with stride 2</strong>: Non-overlapping windows, reduces spatial dimensions by half
<ul>
<li>Input: <span class="math inline">\(H \times W\)</span></li>
<li>Output: <span class="math inline">\(\frac{H}{2} \times \frac{W}{2}\)</span></li>
</ul></li>
<li><strong>3×3 pooling with stride 2</strong>: Overlapping windows, smoother downsampling
<ul>
<li>Input: <span class="math inline">\(H \times W\)</span></li>
<li>Output: <span class="math inline">\(\lfloor\frac{H-1}{2}\rfloor + 1 \times \lfloor\frac{W-1}{2}\rfloor + 1\)</span></li>
</ul></li>
</ol>
<p><img src="maxpooling.png" class="img-fluid" alt="Max pooling visualization"> <em>Figure: Max pooling operation - the pooling window slides over the feature map, selecting the maximum value in each neighborhood. This preserves the strongest activations while discarding weaker responses.</em></p>
</section>
<section id="properties-of-max-pooling" class="level3">
<h3 class="anchored" data-anchor-id="properties-of-max-pooling">Properties of Max Pooling</h3>
<ol type="1">
<li><strong>Selects strongest evidence</strong>: Keeps only the most activated detector in each region</li>
<li><strong>Non-linear</strong>: Max is a non-linear operation (unlike average pooling)</li>
<li><strong>Position-dependent gradient</strong>: During backpropagation, gradient flows only to the position with maximum value</li>
<li><strong>Sparse activations</strong>: Only one position per pool contributes to the output</li>
</ol>
</section>
<section id="downsampling-effect" class="level3">
<h3 class="anchored" data-anchor-id="downsampling-effect">Downsampling Effect</h3>
<p><strong>“Max pooling downsamples the activations by summarizing each local neighborhood, so there are fewer pooling units than activation units.”</strong></p>
<p><img src="downsample.png" class="img-fluid" alt="Downsampling through pooling"> <em>Figure: Spatial downsampling - max pooling reduces the number of activations by summarizing local regions. Each pooling unit aggregates information from multiple detector units, creating a more compact representation.</em></p>
<p><strong>Example</strong>: For a <span class="math inline">\(28 \times 28\)</span> feature map with <span class="math inline">\(2 \times 2\)</span> pooling (stride 2): - <strong>Before pooling</strong>: <span class="math inline">\(28 \times 28 = 784\)</span> activations - <strong>After pooling</strong>: <span class="math inline">\(14 \times 14 = 196\)</span> activations - <strong>Reduction factor</strong>: <span class="math inline">\(4\times\)</span> fewer activations</p>
<p>This reduction cascades through the network: - <strong>Memory savings</strong>: Fewer activations to store during training - <strong>Computational savings</strong>: Fewer inputs for subsequent convolution layers - <strong>Parameter savings</strong>: If followed by fully connected layers, much smaller input dimension</p>
<hr>
</section>
</section>
<section id="alternative-pooling-operations" class="level2">
<h2 class="anchored" data-anchor-id="alternative-pooling-operations">4. Alternative Pooling Operations</h2>
<p>While max pooling is most common, other pooling strategies exist:</p>
<section id="average-pooling" class="level3">
<h3 class="anchored" data-anchor-id="average-pooling">Average Pooling</h3>
<p><span class="math display">\[
y_{i,j} = \frac{1}{k^2} \sum_{p=0}^{k-1} \sum_{q=0}^{k-1} x_{si+p, sj+q}
\]</span></p>
<p><strong>Properties</strong>: - Smoother than max pooling - All positions contribute equally - Better for preserving overall magnitude - Less commonly used in modern CNNs (except for global pooling)</p>
</section>
<section id="l²-pooling" class="level3">
<h3 class="anchored" data-anchor-id="l²-pooling">L² Pooling</h3>
<p><span class="math display">\[
y_{i,j} = \sqrt{\sum_{p=0}^{k-1} \sum_{q=0}^{k-1} x_{si+p, sj+q}^2}
\]</span></p>
<p><strong>Properties</strong>: - Emphasizes larger activations (but less extreme than max) - Differentiable everywhere (unlike max) - Rarely used in practice</p>
</section>
<section id="weighted-average-pooling" class="level3">
<h3 class="anchored" data-anchor-id="weighted-average-pooling">Weighted Average Pooling</h3>
<p><span class="math display">\[
y_{i,j} = \sum_{p=0}^{k-1} \sum_{q=0}^{k-1} w_{p,q} \cdot x_{si+p, sj+q}
\]</span></p>
<p>where <span class="math inline">\(w_{p,q}\)</span> are learned or predefined weights.</p>
<p><strong>Properties</strong>: - Can learn which positions to emphasize - More flexible but more parameters - Used in some attention-based architectures</p>
<hr>
</section>
</section>
<section id="cnn-architectures-pooling-strategies" class="level2">
<h2 class="anchored" data-anchor-id="cnn-architectures-pooling-strategies">5. CNN Architectures: Pooling Strategies</h2>
<p>Different CNN architectures use different approaches to spatial downsampling. The figure below compares three common strategies:</p>
<p><img src="structure.png" class="img-fluid" alt="CNN architecture comparison"> <em>Figure: Three CNN architectures with different downsampling strategies - (left) strided convolutions only, (middle) traditional max pooling, (right) global average pooling with no fully connected layers.</em></p>
<section id="architecture-1-no-pooling-stride-based-downsampling" class="level3">
<h3 class="anchored" data-anchor-id="architecture-1-no-pooling-stride-based-downsampling">Architecture 1: No Pooling (Stride-Based Downsampling)</h3>
<p><strong>Structure</strong>: Convolution → Strided Convolution → Strided Convolution → Flatten → FC → Output</p>
<p><strong>Key characteristics</strong>: - <strong>No explicit pooling layers</strong>: Spatial reduction achieved entirely through strided convolutions - <strong>Learnable downsampling</strong>: Stride in convolution serves dual purpose (feature extraction + downsampling) - <strong>More parameters</strong>: Fully connected layers operate on larger flattened features</p>
<p><strong>Advantages</strong>: - Simpler architecture (fewer layer types) - Downsampling is learned, not fixed - No information loss from pooling operation</p>
<p><strong>Disadvantages</strong>: - More parameters in final fully connected layers - Less explicit control over invariance properties - May require more data to learn effective downsampling</p>
<p><strong>Modern usage</strong>: Increasingly popular in architectures like ResNet (which uses stride-2 convolutions) and fully convolutional networks.</p>
<hr>
</section>
<section id="architecture-2-max-pooling-network" class="level3">
<h3 class="anchored" data-anchor-id="architecture-2-max-pooling-network">Architecture 2: Max Pooling Network</h3>
<p><strong>Structure</strong>: Convolution → Max Pool → Convolution → Max Pool → Flatten → FC → Output</p>
<p><strong>Key characteristics</strong>: - <strong>Traditional CNN design</strong>: Alternating convolution and pooling layers - <strong>Fixed downsampling</strong>: Max pooling operation is not learned - <strong>Translation invariance</strong>: Explicit pooling provides robustness to small translations</p>
<p><strong>Advantages</strong>: - Statistically efficient (fewer parameters after pooling) - Strong translation invariance - Proven track record (LeNet, AlexNet, early VGG)</p>
<p><strong>Disadvantages</strong>: - Fixed pooling operation (not adaptive) - Some information loss (discards non-maximum activations) - Still requires large fully connected layers</p>
<p><strong>Classic examples</strong>: LeNet-5, AlexNet, VGG-16 (early pooling layers)</p>
<p><strong>How it works</strong>: 1. Convolution layers detect features (edges, textures, patterns) 2. Max pooling reduces spatial resolution while keeping strongest responses 3. After several conv-pool stages, feature maps are small but deep 4. Flatten and feed into fully connected classifier 5. Output layer produces class probabilities</p>
<hr>
</section>
<section id="architecture-3-global-average-pooling-gap-network" class="level3">
<h3 class="anchored" data-anchor-id="architecture-3-global-average-pooling-gap-network">Architecture 3: Global Average Pooling (GAP) Network</h3>
<p><strong>Structure</strong>: Convolution → Convolution → Conv (C filters) → Global Avg Pool → Output</p>
<p><strong>Key characteristics</strong>: - <strong>No fully connected layers</strong>: Directly from features to predictions - <strong>Class-specific feature maps</strong>: Final convolution has one channel per class - <strong>Global average pooling</strong>: Each feature map becomes a single scalar</p>
<p><strong>Advantages</strong>: - <strong>Drastically fewer parameters</strong>: No large fully connected layers - <strong>Inherent regularization</strong>: Less prone to overfitting - <strong>Spatial correspondence</strong>: Each feature map directly corresponds to a class - <strong>Fully convolutional</strong>: Can handle variable input sizes</p>
<p><strong>Disadvantages</strong>: - May require deeper networks to achieve same capacity - Less flexible than fully connected layers - Can be harder to train initially</p>
<p><strong>How it works</strong>:</p>
<ol type="1">
<li><strong>Final convolution</strong>: Produces <span class="math inline">\(C\)</span> feature maps (one per class) of size <span class="math inline">\(h \times w\)</span></li>
</ol>
<p><span class="math display">\[
F_c \in \mathbb{R}^{h \times w} \quad \text{for } c = 1, \ldots, C
\]</span></p>
<ol start="2" type="1">
<li><strong>Global average pooling</strong>: Averages each feature map to a single value</li>
</ol>
<p><span class="math display">\[
y_c = \frac{1}{hw} \sum_{i=1}^h \sum_{j=1}^w F_c(i, j)
\]</span></p>
<ol start="3" type="1">
<li><strong>Output</strong>: Vector <span class="math inline">\([y_1, y_2, \ldots, y_C]\)</span> gives class scores directly</li>
</ol>
<p><strong>Why it works</strong>: - Each feature map learns to detect class-specific patterns - Global averaging provides translation invariance over the entire image - No parameters in this layer (purely aggregation)</p>
<p><strong>Modern examples</strong>: - <strong>Network-in-Network</strong> (NiN): Introduced GAP - <strong>GoogLeNet/Inception</strong>: Uses GAP before final classifier - <strong>ResNet variants</strong>: Many use GAP instead of fully connected layers - <strong>MobileNet</strong>: Efficient architectures with GAP</p>
<hr>
</section>
</section>
<section id="pooling-vs-strided-convolutions" class="level2">
<h2 class="anchored" data-anchor-id="pooling-vs-strided-convolutions">6. Pooling vs Strided Convolutions</h2>
<p>Modern deep learning research has questioned whether explicit pooling is necessary.</p>
<section id="comparison-table" class="level3">
<h3 class="anchored" data-anchor-id="comparison-table">Comparison Table</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 16%">
<col style="width: 44%">
<col style="width: 38%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Aspect</strong></th>
<th><strong>Pooling (e.g., Max Pool)</strong></th>
<th><strong>Strided Convolutions</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Learnable</strong></td>
<td>No (fixed operation)</td>
<td>Yes (learned filters)</td>
</tr>
<tr class="even">
<td><strong>Parameters</strong></td>
<td>0</td>
<td><span class="math inline">\(k^2 \times c_{\text{in}} \times c_{\text{out}}\)</span></td>
</tr>
<tr class="odd">
<td><strong>Information loss</strong></td>
<td>Discards non-max values</td>
<td>Learns what to discard</td>
</tr>
<tr class="even">
<td><strong>Translation invariance</strong></td>
<td>Strong (by design)</td>
<td>Depends on learned filters</td>
</tr>
<tr class="odd">
<td><strong>Computational cost</strong></td>
<td>Low (no parameters)</td>
<td>Higher (more multiply-adds)</td>
</tr>
<tr class="even">
<td><strong>Gradient flow</strong></td>
<td>Sparse (only max position)</td>
<td>Dense (all positions)</td>
</tr>
</tbody>
</table>
</section>
<section id="current-trends" class="level3">
<h3 class="anchored" data-anchor-id="current-trends">Current Trends</h3>
<p><strong>Shift toward strided convolutions</strong>: - Modern architectures (ResNet, EfficientNet) use fewer or no pooling layers - Strided convolutions can learn better downsampling strategies - Fully convolutional designs enable variable input sizes</p>
<p><strong>When pooling still helps</strong>: - Small datasets (fewer parameters = less overfitting) - When strong translation invariance is desired - Global average pooling for parameter reduction</p>
<hr>
</section>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 46%">
<col style="width: 53%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Concept</strong></th>
<th><strong>Key Idea</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Pooling Operation</strong></td>
<td>Aggregates activations over local neighborhoods to reduce spatial resolution</td>
</tr>
<tr class="even">
<td><strong>Max Pooling</strong></td>
<td>Selects maximum value in each region; most common pooling type</td>
</tr>
<tr class="odd">
<td><strong>Translation Invariance</strong></td>
<td>Pooling makes outputs approximately unchanged under small input shifts</td>
</tr>
<tr class="even">
<td><strong>Downsampling</strong></td>
<td>Reduces spatial dimensions, lowering computation and memory requirements</td>
</tr>
<tr class="odd">
<td><strong>Typical Configuration</strong></td>
<td><span class="math inline">\(2 \times 2\)</span> pooling with stride 2 (halves each spatial dimension)</td>
</tr>
<tr class="even">
<td><strong>Architecture Types</strong></td>
<td>No pooling (strided conv), max pooling networks, global average pooling</td>
</tr>
<tr class="odd">
<td><strong>GAP Advantage</strong></td>
<td>Eliminates fully connected layers, drastically reducing parameters</td>
</tr>
<tr class="even">
<td><strong>Modern Trend</strong></td>
<td>Shift toward strided convolutions over explicit pooling</td>
</tr>
</tbody>
</table>
<p><strong>Key takeaway</strong>: Pooling provides a simple, parameter-free way to achieve spatial downsampling and approximate translation invariance. While modern architectures increasingly use learnable downsampling (strided convolutions), pooling remains valuable for its statistical efficiency and strong invariance properties. Global average pooling, in particular, has become a standard technique for parameter reduction in modern CNNs.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="light">
<script>
  function loadGiscus() {
    // Function to get the theme based on body class
    const getTheme = () => {
      let baseTheme = document.getElementById('giscus-base-theme').value;
      let altTheme = document.getElementById('giscus-alt-theme').value;
      return document.body.classList.contains('quarto-dark') ? altTheme : baseTheme;
    };
    const script = document.createElement("script");
    script.src = "https://giscus.app/client.js";
    script.async = true;
    script.dataset.repo = "ickma2311/ickma2311.github.io";
    script.dataset.repoId = "R_kgDOOzbaAg";
    script.dataset.category = "Comments";
    script.dataset.categoryId = "DIC_kwDOOzbaAs4CxPFj";
    script.dataset.mapping = "pathname";
    script.dataset.reactionsEnabled = "1";
    script.dataset.emitMetadata = "0";
    script.dataset.inputPosition = "top";
    script.dataset.theme = getTheme();
    script.dataset.lang = "en";
    script.crossOrigin = "anonymous";
    // Append the script to the desired div instead of at the end of the body
    document.getElementById("quarto-content").appendChild(script);
  }
  loadGiscus();
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Chapter 9.3: Pooling"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Chao Ma"</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "2025-11-24"</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> [Deep Learning, Convolutional Networks, Pooling, CNN Architecture]</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">## Overview</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>This section explains the pooling operation in convolutional neural networks:</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Local translation invariance**: How pooling makes networks insensitive to exact spatial locations</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Max pooling**: Downsampling by selecting maximum activations in neighborhoods</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**CNN architectures**: Comparing no pooling, max pooling, and global average pooling approaches</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>Pooling reduces spatial resolution while preserving important features, making CNNs more robust to translations.</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="al">![CNN architecture overview](CNN_components.png)</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>*Figure: CNN components - convolution layers detect features, pooling layers aggregate and downsample, creating increasingly abstract representations.*</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="fu">## 1. Local Translation Invariance</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>**Local translation invariance means that small shifts in the input produce nearly unchanged outputs.** After convolution and pooling, the representation becomes insensitive to the exact spatial location of features, responding mainly to whether a feature is present rather than where it appears within a small neighborhood.</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="al">![Translation invariance through pooling](local_transition_invariant.png)</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>*Figure: How pooling creates translation invariance - different detectors respond strongly to different shifted versions of the same pattern, but the pooling unit aggregates these responses into a single large output. Thus, even when the input '5' appears at different positions, the pooled representation remains nearly unchanged.*</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="fu">## 2. Max Pooling</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>**Pooling reduces the spatial resolution of feature maps by summarizing local neighborhoods** (e.g., via max or average). It makes the representation more robust to small translations, reduces sensitivity to exact pixel locations, and improves computational and statistical efficiency.</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="al">![Max pooling operation](maxpooling.png)</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>*Figure: Max pooling operation - the pooling window slides over the feature map, selecting the maximum value in each local neighborhood.*</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>**"Max pooling downsamples the activations by summarizing each local neighborhood, so there are fewer pooling units than activation units."**</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="al">![Downsampling effect](downsample.png)</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>*Figure: Downsampling through max pooling - each pooling unit aggregates information from multiple detector units in the feature map, creating a more compact representation.*</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="fu">## 3. CNN Architecture Structures</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="al">![Three CNN architectures](structure.png)</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>*Figure: Comparison of three CNN architectures - (left) strided convolutions without pooling, (middle) traditional max pooling network, (right) global average pooling network without fully connected layers.*</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a><span class="fu">### Left: No Pooling (Stride-Based Downsampling)</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>This architecture removes pooling entirely and relies on **strided convolutions** to reduce spatial resolution.</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>Each convolution layer computes features while simultaneously downsampling the image.</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>After a few strided convolutions, the feature maps are flattened and fed into a fully connected classifier.</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>**Key characteristic**: This design keeps the structure simple but usually requires more parameters in the classifier, since the flattened representation can be relatively large.</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a><span class="fu">### Middle: Max Pooling Network</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>This is the **classic CNN architecture** where pooling layers follow convolution layers.</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>Max pooling discards precise spatial information while keeping the strongest local responses, reducing spatial resolution and achieving some translation invariance.</span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>After several conv-pool stages, the final feature maps are flattened and passed through fully connected layers.</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>**Key characteristic**: This design is statistically efficient and was widely used in early CNNs, including LeNet and AlexNet.</span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a><span class="fu">### Right: Global Average Pooling (GAP) Network</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>Instead of flattening or using dense layers, this architecture uses a **final convolution with as many channels as there are classes**.</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a>Each channel then becomes a class-specific activation map.</span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a>**Global average pooling** collapses each map into a single scalar, producing one score per class.</span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>**Key advantage**: This removes the need for fully connected layers, greatly reducing parameters and improving robustness.</span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>GAP-based designs are common in modern architectures such as Network-in-Network and many variants of ResNet.</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>